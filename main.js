(()=>{"use strict";const t=document.createRange(),e=t.createContextualFragment('<template>\n\t<style>\n\t\t:host {\n\t\t\tposition: relative;\n\t\t\tdisplay: block;\n\t\t\tz-index: 0;\n\t\t\t--split: 100%;\n\t\t}\n\t\t.content {\n\t\t\tclip-path: inset(0px 0px calc(100% - var(--split)) 0px);\n\t\t}\n\t\t.clone {\n\t\t\tposition: absolute;\n\t\t\tinset: 0;\n\t\t\tclip-path: inset(var(--split) 0px 0px 0px);\n\t\t}\n\t\t.clone split-target {\n\t\t\tfont-weight: 600;\n\t\t\ttext-decoration: underline;\n\t\t}\n\t\t.split {\n\t\t\tposition: absolute;\n\t\t\tinset: var(--split) 0 0;\n\t\t}\n\t</style>\n\t<div class="content">\n\t\t<slot></slot>\n\t</div>\n\t<div class="split">\n\t\t<slot name="split"></slot>\n\t</div>\n</template>');function s(t,e=[]){let n=t;for(;(n=n.nextElementSibling)&&"SCRIPT"!==n.tagName&&"STYLE"!==n.tagName;)e.push(n);return t===document.body?e:s(t.parentNode,e)}class n extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.firstElementChild.content.cloneNode(!0)),this.makeClone(),this.makeSplit(),this.state=!1,this.shadowRoot.addEventListener("split-toggle",this.handle.bind(this))}handle(e){if(this.open(e.target),e.detail){this.split.appendChild(t.createContextualFragment(e.detail));const n=this.split.offsetHeight,i={duration:500,easing:"ease",fill:"both"};this.movables=s(this,[]);const{top:o}=this.movables[0].getBoundingClientRect(),{bottom:a}=this.getBoundingClientRect(),l=o-a;l>n&&(this.movables.length=0),this.movables.forEach((t=>t.animate([{transform:"translateY(0px)"},{transform:`translateY(${n-l}px)`}],i))),this.clone.animate([{transform:"translateY(0px)"},{transform:`translateY(${n}px)`}],i),this.split.animate([{clipPath:`inset(0 0 ${n}px 0)`},{clipPath:"inset(0 0 0 0)"}],i).finished.then((()=>{const t=window.scrollY;this.split.focus(),window.scrollTo(0,t),this.style.removeProperty("pointer-events")})),this.style.setProperty("pointer-events","none")}else this.movables.forEach((t=>t.getAnimations().forEach((t=>{t.reverse()})))),this.clone.getAnimations().forEach((t=>{t.reverse()})),this.split.getAnimations().forEach((t=>{t.reverse(),t.finished.then((()=>{this.split.innerHTML=""}))}))}makeClone(){this.clone=document.createElement("div"),this.clone.classList.add("clone"),this.clone.setAttribute("aria-hidden","true"),this.clone.innerHTML=this.innerHTML,this.shadowRoot.appendChild(this.clone)}makeSplit(){this.split=document.createElement("div"),this.split.setAttribute("slot","split"),this.split.setAttribute("tabindex","-1"),this.appendChild(this.split)}open(t){const e=()=>{const{top:e}=t.parentElement.getBoundingClientRect(),{bottom:s}=t.getBoundingClientRect();this.style.setProperty("--split",s-e+"px")};e(),window.addEventListener("resize",e),this.onClose=()=>window.removeEventListener("resize",e)}}const i=new Map,o=new Map;class a extends HTMLElement{constructor(){var t;super(),(t=this.id,i.has(t)||i.set(t,fetch(`pages/${t}.html`).then((t=>t.text()))),i.get(t)).then((t=>{this.content=t,this.addEventListener("click",this.toggle),this.addEventListener("keydown",this.keydown),this.setAttribute("role","button")})),o.has(this.id)||o.set(this.id,[]),o.get(this.id).push(this)}toggle(){this.state=!this.state,this.dispatchEvent(new CustomEvent("split-toggle",{detail:this.state?this.content:null,bubbles:!0}))}keydown(t){"Enter"===t.key&&this.toggle()}get id(){return this.dataset.page}get state(){return"true"===this.dataset.state}set state(t){o.get(this.id).forEach((e=>{e.dataset.state=String(t)}))}}customElements.define("split-container",n),customElements.define("split-target",a);const l=document.createElement("link");l.rel="stylesheet",l.href="styles/pages.css",document.head.appendChild(l)})();