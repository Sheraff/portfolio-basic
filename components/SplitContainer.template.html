<template>
	<style>
		:host {
			position: relative;
			display: block;
			z-index: 0;
			--split: 100%;
		}
		.content {
			clip-path: inset(0px 0px calc(100% - var(--split)) 0px);
		}
		.clone {
			--delta: 0px;
			position: absolute;
			inset: 0;
			clip-path: inset(var(--split) 0px 0px 0px);
			transform: translateY(var(--delta));
		}
		.split {
			position: absolute;
			inset: calc(var(--split) + .1em) 0 0;
		}
		.anim {
			position: absolute;
			top: calc(var(--split) + .1em);
			left: 50%;
			width: 100vw;
			will-change: transform, opacity;
			transform: translate3d(0,0,0) translateX(-50%);
			z-index: 1;
			opacity: 0;
			
			--y: 3;
			background-color: currentColor;
			height: 1px;
		}
		.go {
			animation: open 500ms ease-in;
		}
		@keyframes open {
				0%  { transform: translate3d(0,0,0) translateX(-50%) scaleX(.01) scaleY(1); opacity: 0; }
				15% { transform: translate3d(0,0,0) translateX(-50%) scaleX(.05) scaleY(var(--y)); opacity: 1; }
				40% { transform: translate3d(0,0,0) translateX(-50%) scaleX(.1)  scaleY(1); opacity: 1; }
				70% { transform: translate3d(0,0,0) translateX(-50%) scaleX(.8)  scaleY(1); opacity: 1; }
				to  { transform: translate3d(0,0,0) translateX(-50%) scaleX(1)   scaleY(1); opacity: 0; }
			}

		@media (prefers-color-scheme: dark) {
			.anim {
				--y: 7;
				height: 2px;
				border-radius: 5px;
				background-color: var(--accent);
				filter: blur(1px);
			}
		}
	</style>
	<div class="content">
		<slot></slot>
	</div>
	<div class="anim"></div>
	<div class="split">
		<slot name="split"></slot>
	</div>
</template>